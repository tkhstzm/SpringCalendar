<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Memo</title>
	<!-- Bootstrap -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
	<link rel="stylesheet" href="css/common.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100..900&display=swap" rel="stylesheet">
</head>

<body>
	<div class="back">
		<a th:href="@{/calendar(year=${year}, month=${month})}">
			<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" stroke="currentColor"
				stroke-width="0.5" class="bi bi-chevron-left" viewBox="0 0 16 16">
				<path fill-rule="evenodd"
					d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0" />
			</svg> back to calendar</a>
	</div>

	<div class="calendar-main">
		<div class="notes-date">
			<p class="content-title">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
					class="bi bi-pencil-square" viewBox="0 0 16 16">
					<path
						d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
					<path fill-rule="evenodd"
						d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z" />
				</svg>
				<span th:text="${hasMemo} ? 'update notes' : 'create notes'">
					create notes
				</span>
			</p>

			<p th:text="${week}"></p>
			<p class="notes-monthday" th:text="${monthEn} + ' . ' + ${date}"></p>
			<p th:text="${year}"></p>
		</div>

		<!-- メモ入力フォーム -->
		<form th:action="@{/saveMemo}" method="post" id="saveForm" class="main-block needs-validation" novalidate>
			<input type="hidden" name="year" th:value="${year}">
			<input type="hidden" name="month" th:value="${month}">
			<input type="hidden" name="date" th:value="${date}">

			<label class="form-label">title</label><br>
			<input class="form-control" type="text" name="memoTitle" th:value="${memoTitle}"
				th:classappend="${errorTitle} ? 'is-invalid' : ''">
			<div class="invalid-feedback" th:if="${errorTitle}" th:text="${errorTitle}"></div>
			<br>
			<label class="form-label">notes</label><br>
			<textarea class="form-control" name="memoContent" rows="7" cols="60" th:text="${memoContent}"
				th:classappend="${errorContent} ? 'is-invalid' : ''"></textarea>
			<div class="invalid-feedback" th:if="${errorContent}" th:text="${errorContent}"></div>
		</form>

		<!-- メモ削除 hasMemoのとき -->
		<form th:if="${hasMemo}" th:action="@{/deleteMemo}" method="post" id="deleteForm">
			<input type="hidden" name="year" th:value="${year}">
			<input type="hidden" name="month" th:value="${month}">
			<input type="hidden" name="date" th:value="${date}">
		</form>

		<!-- フォーム下部のボタン -->
		<div th:if="${!hasMemo}" class="btn-wrap">
			<button class="btn" type="submit" form="saveForm"
				onclick="return confirm('Save this note?');">
				save
			</button>
		</div>

		<div th:if="${hasMemo}" class="btn-wrap">
			<button class="btn hasmemo-btn" style="width: 35%; background: #736e6e;" type="submit"
				form="deleteForm" onclick="return confirm('Delete this note?');">
				delete
			</button>

			<button class="btn hasmemo-btn" type="submit" form="saveForm"
				onclick="return confirm('Update this note?');">
				update
			</button>
		</div>
	</div>
</body>
</html>